<!-- postagemnova.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Criar uma postagem nova</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <h1>Criar uma postagem nova</h1>
    <p>Preencha os campos abaixo e clique em "Postar".</p>
    <form>
        <label for="title">Título:</label>
        <input type="text" id="title" name="title" required>
        <label for="image">Imagem:</label>
        <input type="file" id="image" name="image" accept=".jpg, .jpeg, .png" required>
        <label for="text">Texto:</label>
        <textarea id="text" name="text" required></textarea>
        <button type="button" onclick="createPost()">Postar</button>
    </form>
    <a href="index.html">Voltar para o site</a>

    <script>
        // Função para criar uma postagem nova a partir do formulário
        function createPost() {
            var titleInput = document.getElementById("title");
            var imageInput = document.getElementById("image");
            var textInput = document.getElementById("text");
            var title = titleInput.value;
            var image = imageInput.files[0]; // Obter o arquivo da entrada de arquivo
            var text = textInput.value;

            if (title && image && text) {
                // Use a função FileReader para ler o conteúdo da imagem como uma URL de dados
                var reader = new FileReader();
                reader.onload = function (e) {
                    addPost(title, e.target.result, text);
                    window.location.href = "index.html";
                };
                reader.readAsDataURL(image); // Lê a imagem como uma URL de dados
            } else {
                alert("Por favor, preencha todos os campos.");
            }
        }
    </script>
</body>
</html>
